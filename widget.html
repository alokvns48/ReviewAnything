<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Review Anything Widget</title>
</head>
<body>
    <!-- Floating Button (Minimized State) -->
    <!-- <div id="reviewAnythingButton" class="floating-button" title="Review Anything">
        <div class="button-icon">‚≠ê</div>
        <div class="button-badge" id="notificationBadge" style="display: none;">0</div>
    </div> -->

    <!-- Main Widget (Expanded State) -->
    <div id="reviewAnythingWidget" class="widget-container" style="display: none;">
        <!-- Widget Header -->
        <div class="widget-header" id="widgetHeader">
            <div class="header-content">
                <h3>‚≠ê Review Anything</h3>
                <div class="user-display">
                    <span id="currentUsername" class="username-display"></span>
                    <button id="refreshUsername" class="refresh-btn" title="Generate new username">üîÑ</button>
                </div>
            </div>
            <div class="header-controls">
                <button id="minimizeBtn" class="control-btn" title="Minimize">‚àí</button>
                <button id="closeBtn" class="control-btn" title="Close">√ó</button>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loadingState" class="loading-state">
            <div class="spinner"></div>
            <p>Loading...</p>
        </div>

        <!-- Main Content -->
        <div id="mainContent" class="main-content" style="display: none;">
            <!-- Tab Navigation -->
            <nav class="tab-nav">
                <button class="tab-btn active" data-tab="reviews">
                    ‚≠ê Reviews
                </button>
                <button class="tab-btn" data-tab="chat">
                    üí¨ Chat
                </button>
            </nav>

            <!-- Reviews Tab -->
            <div id="reviewsTab" class="tab-content active">
                <div class="reviews-header">
                    <h4>Reviews for this page</h4>
                    <div class="rating-summary">
                        <div class="average-rating">
                            <span id="avgRating">0.0</span>
                            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        </div>
                        <span id="reviewCount">(0 reviews)</span>
                    </div>
                </div>

                <!-- Review Form -->
                <div class="review-form" id="reviewForm">
                    <h5>Write a Review</h5>
                    <div class="rating-input">
                        <label>Rating:</label>
                        <div class="star-rating">
                            <span class="star" data-rating="1">‚òÜ</span>
                            <span class="star" data-rating="2">‚òÜ</span>
                            <span class="star" data-rating="3">‚òÜ</span>
                            <span class="star" data-rating="4">‚òÜ</span>
                            <span class="star" data-rating="5">‚òÜ</span>
                        </div>
                    </div>
                    <textarea id="reviewComment" placeholder="Share your thoughts about this page..." maxlength="1000"></textarea>
                    <div class="char-count">
                        <span id="charCount">0</span>/1000
                    </div>
                    <button id="submitReview" class="btn btn-primary">
                        üì§ Submit Review
                    </button>
                </div>

                <!-- Reviews List -->
                <div class="reviews-list" id="reviewsList">
                    <!-- Reviews will be dynamically loaded here -->
                </div>
            </div>

            <!-- Chat Tab -->
            <div id="chatTab" class="tab-content">
                <div class="chat-header">
                    <h4>Live Chat</h4>
                    <span id="onlineUsers">0 online</span>
                </div>

                <!-- Chat Messages -->
                <div class="chat-messages" id="chatMessages">
                    <!-- Messages will be dynamically loaded here -->
                </div>

                <!-- Chat Input -->
                <div class="chat-input">
                    <textarea id="chatMessage" placeholder="Type your message..." maxlength="500"></textarea>
                    <div class="chat-controls">
                        <div class="char-count">
                            <span id="chatCharCount">0</span>/500
                        </div>
                        <button id="sendMessage" class="btn btn-primary">
                            üì§ Send
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error State -->
        <div id="errorState" class="error-state" style="display: none;">
            ‚ö†Ô∏è
            <p id="errorMessage">Something went wrong. Please try again.</p>
            <div class="error-buttons">
                <button id="backBtn" class="btn btn-secondary">‚Üê Back</button>
                <button id="retryBtn" class="btn btn-primary">Retry</button>
            </div>
        </div>
    </div>

    <script src="firebase-app.js"></script>
    <script src="firebase-firestore.js"></script>
    <script src="firebase-database.js"></script>
    <script src="firebase-config.js"></script>
    <script src="widget.js"></script>
</body>
</html> 